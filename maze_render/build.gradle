apply plugin:'application'
apply plugin: 'c'
apply plugin: 'java'

mainClassName = "Driver"

model {
    components {
        maze_render(NativeExecutableSpec) {
            sources {
                c {
                    source {
                        srcDir "src/main/c"
                        include "**/*.c"
                    }
                }
            }
        }
    }
}

repositories {
    mavenCentral()
}

dependencies {
    testImplementation group: 'junit', name: 'junit', version: '4.11'
}

run {
    standardInput = System.in
    args = [
        (project.hasProperty('size') ? size : '')
    ]
}

task generate(dependsOn: run, type: Exec) {
    commandLine 'build/exe/maze_render/maze_render', 'maze.dat', 'maze.bmp'
}
